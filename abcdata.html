<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <script src="https://d3js.org/d3.v7.min.js"></script>
    </head>
    <body> 
      <svg id="barchart">
        <g id="shapes"></g>
        <g id="x"></g>
        <g id="y"></g>
    </svg>
<script>


            d3.csv("./abcnews.csv")
              .then(function(data) {
                console.log(data);
              });

            var width = window.innerWidth;
            var height = window.innerHeight;
            
           
            var svg= d3.select("#barchart")
            .attr("width", width)
            .attr("height", height)

            var barHeight=d3.scaleLinear()
            .domain([0,max])
            .range([0,chartHeight]);


            var y= d3.scaleLinear()
                .domain([0, max])
                .range([margin.top + chartHeight, margin.top]);

            function fetchData(data) {

           
// Data Binding
            var bars = svg.select("#shapes").selectAll(".bar")
            .data(data, function(d){
    return d.value;});

            
// Entering Bars

          var barHeight = d3.scaleLinear()
            .domain([0, d3.max(data)])
            .range([0, height]);
            
            var max= d3.max(data, function(d){
                return d.value;
            });
            
            var barWidth = width / dataMax;

              var enterBars= bars.enter().append("rect")
              .attr("class", "bar")
              .attr("width", barWidth)
              .attr("x", function(d) {
                return x(d.value)
              .transition().duration(frequency / 2)
              .attr("height", barHeight)
              .attr("y", function(d) {
                var h = barHeight(d);
                return height - h;
              })
              .call(zeroState)
              .attr("fill", "red")
            });
            


            // Updating Bars
            bars
              .transition().duration(frequency / 2)
              .attr("x", function(d, i) {
                return x(i + 1);
              })
              .attr("height", barHeight)
              
              .attr("y", function(d, i) {
              var h = barHeight(d);
              return height - h;
        
              });
              

            // Exiting Bars
            bars.exit()
              .transition().duration(frequency / 2)
              .call(zeroState)
              .remove();
            

            };
            
        

fetchData(data);
        
              
          </script>
    </body>
    

    
</html>